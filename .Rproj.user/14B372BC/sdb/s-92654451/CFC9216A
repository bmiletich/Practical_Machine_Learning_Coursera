{
    "collab_server" : "",
    "contents" : "---\ntitle: \"PA2_NOAA_Damage_Calculations\"\nauthor: \"Bryan Miletich\"\ndate: \"Monday, August 18, 2014\"\noutput: html_document\n---\n###Synopsis\nThis analysis was created to answer two questions:\n\n1. Across the United States, which types of events (as indicated in the EVTYPE variable) are most harmful with respect to population health?\n2. Across the United States, which types of events have the greatest economic consequences?\n\nWe can see from the above results that tornadoes are the most destructive environmental disaster type in terms of fatalities, injuries, and crop damage. The Winter Storm is the most destructive type of environmental disaster in terms of property damage.\n\n###Data Processing\n\nIn order to answer these questions, we need to pre-process the data appropriately. The first step is to read the data:\n\n```{r}\nstormData<-read.csv(\"repdata-data-StormData.csv\")\n```\n\nThis data was retrieved from this link:\n\nhttps://d396qusza40orc.cloudfront.net/repdata%2Fdata%2FStormData.csv.bz2\n\nIt can be uncompressed using a compression software of your choice (winzip, winrar, 7zip, etc).\n\nThe variables in this dataset are shown here:\n\n```{r}\nnames(stormData)\n```\n\nFor question one, we need to look at the variables: FATALITIES and INJURIES. For question two, we need to look at: PROPDMG, PROPDMGEXP, CROPDMG, and CROPDMGEXP.\n\nWe can order the event types by the number of FATALITIES and INJURIES with this code:\n```{r}\nlibrary(data.table)\nstormData<-as.data.table(stormData)\n\nfatalityList<-stormData[,sum(FATALITIES),by=EVTYPE]\ninjuryList<-stormData[,sum(INJURIES),by=EVTYPE]\n\n#find sorted indexes for FATALITIES and INJURIES\nsorted.fatalities<-order(fatalityList$V1,decreasing=TRUE)\nsorted.injuries<-order(injuryList$V1,decreasing=TRUE)\n\n#print output\nfatalityList[sorted.fatalities]\ninjuryList[sorted.injuries]\n```\n\nWe can see from these sorted lists on fatalities and injuries that tornadoes are the most harmful with respect to population health.\n\nWe can create another sorted list to see which EVTYPE is most economically harmful with the same methodology as above.\n\nFirst we need to know what units are being used for each observation in PROPDMG and CROPDMG by observing their corresponding PROPDMGEXP and CROPDMGEXP values. A value of a \"B\" or \"b\" stands for billions, \"k\" or \"K\" stands for thousands, and \"M\" or \"m\" stands for millions. All other values will be treated as normal units.\n\n```{r}\nsummary(stormData$PROPDMGEXP)\nsummary(stormData$CROPDMGEXP)\n```\n\nI will write a small helper function to find the multiplier for determining the property and crop damages:\n\n```{r}\nmultiplier<-function(x){\n       \n        \n        if(as.character(x)==\"K\"||as.character(x)==\"k\"){\n                return(1000)\n        }\n        \n        if(as.character(x)==\"M\"||as.character(x)==\"m\"){\n                return(1000000)\n        }\n        \n        if(as.character(x)==\"B\"||as.character(x)==\"b\"){\n                return(1000000000)\n        }\n}\n\n```\n\nI can use this function with the data.table package to find the summation of costs for each EVTYPE:\n\n```{r}\nstormData.property<-stormData[,sum(as.double(multiplier(PROPDMGEXP))*PROPDMG),by=EVTYPE]\nstormData.crop<-stormData[,sum(as.double(multiplier(PROPDMGEXP))*PROPDMG),by=EVTYPE]\n```\nI can now order each table:\n\n```{r}\n\n#find sorted indexes for PROPDMG and CROPDMG\nsorted.property<-order(stormData.property$V1,decreasing=TRUE)\nsorted.crop<-order(stormData.crop$V1,decreasing=TRUE)\n\n\n#print output\nstormData.property[sorted.property]\nstormData.crop[sorted.property]\n```\n\n\n###Results\n\nWe can see from the above results that tornadoes are the most destructive environmental disaster type in terms of fatalities, injuries, and crop damage. The Winter Storm is the most destructive type of environmental disaster in terms of property damage.\n\nWe can view the top 10 most destructive environmental disasters in terms of property damage:\n\n```{r, fig.height=7,fig.width=7}\nlibrary(ggplot2)\n\nstormData.property.sorted<-stormData.property[sorted.property]\n\nggplot(data=stormData.property.sorted[1:10,],aes(x=EVTYPE,y=V1, fill=EVTYPE)) + \n        geom_bar(stat=\"identity\",colour=\"black\") +\n        xlab(\"Weather Event Type\") +\n        ylab(\"Property Damages\") +\n        ggtitle(\"Top 10 weather events with most property damage\") +\n        theme(axis.text.x=element_text(angle=90,hjust=1)) +\n        geom_text(aes(label=V1,angle=90,y=10),size=3,hjust=-1)\n\n```\n\n\nThe damage from the winter storm is approximately 1.327206 * 10^14, which we can see is far more costly than the Tropical Storm at 4.8 * 10^10.\n\n\n",
    "created" : 1486346118107.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "4090748074",
    "id" : "CFC9216A",
    "lastKnownWriteTime" : 1408922969,
    "last_content_update" : 1408922969,
    "path" : "C:/Users/Bryan/Google Drive/MBA Classes/Reproducible Research - Coursera/Reproducible Research - Peer Assessment 2/PA2_Complete.rmd",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 5,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_markdown"
}